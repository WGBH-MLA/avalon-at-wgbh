{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _reactRedux = require(\"react-redux\");\n\nvar _TimespanInlineForm = _interopRequireDefault(require(\"./TimespanInlineForm\"));\n\nvar _HeadingInlineForm = _interopRequireDefault(require(\"./HeadingInlineForm\"));\n\nvar _smData = require(\"../actions/sm-data\");\n\nvar _lodash = require(\"lodash\");\n\nvar _StructuralMetadataUtils = _interopRequireDefault(require(\"../services/StructuralMetadataUtils\"));\n\nvar structuralMetadataUtils = new _StructuralMetadataUtils[\"default\"]();\n\nvar ListItemEditForm =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inherits2[\"default\"])(ListItemEditForm, _Component);\n\n  function ListItemEditForm(props) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, ListItemEditForm);\n    _this = (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(ListItemEditForm).call(this, props));\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"setIsTyping\", function (value) {\n      if (value === 1) {\n        _this.setState({\n          isTyping: true\n        });\n      } else {\n        _this.setState({\n          isTyping: false\n        });\n      }\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"setIsInitializing\", function (value) {\n      if (value === 1) {\n        _this.setState({\n          isInitializing: true\n        });\n      } else {\n        _this.setState({\n          isInitializing: false\n        });\n      }\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleCancelClick\", function (e) {\n      _this.props.handleEditFormCancel();\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleSaveClick\", function (id, payload) {\n      // Clone smData\n      var clonedItems = (0, _lodash.cloneDeep)(_this.props.smData); // Get the original item\n\n      /* eslint-disable */\n\n      var item = structuralMetadataUtils.findItem(id, clonedItems);\n      /* eslint-enable */\n      // Update item values\n\n      item = _this.addUpdatedValues(item, payload); // Send updated smData back to redux\n\n      _this.props.buildSMUI(clonedItems); // Turn off editing state\n\n\n      _this.props.handleEditFormCancel();\n    });\n    _this.state = {\n      isTyping: false,\n      isInitializing: true\n    };\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(ListItemEditForm, [{\n    key: \"addUpdatedValues\",\n    value: function addUpdatedValues(item, payload) {\n      if (item.type === 'div' || item.type === 'root') {\n        item.label = payload.headingTitle;\n      } else if (item.type === 'span') {\n        item.label = payload.timespanTitle;\n        item.begin = payload.beginTime;\n        item.end = payload.endTime;\n      }\n\n      return item;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var item = this.props.item;\n\n      if (item.type === 'span') {\n        return _react[\"default\"].createElement(_TimespanInlineForm[\"default\"], {\n          item: item,\n          cancelFn: this.handleCancelClick,\n          saveFn: this.handleSaveClick,\n          setIsTyping: this.setIsTyping,\n          isTyping: this.state.isTyping,\n          isInitializing: this.state.isInitializing,\n          setIsInitializing: this.setIsInitializing\n        });\n      }\n\n      if (item.type === 'div' || item.type === 'root') {\n        return _react[\"default\"].createElement(_HeadingInlineForm[\"default\"], {\n          item: item,\n          cancelFn: this.handleCancelClick,\n          saveFn: this.handleSaveClick\n        });\n      }\n    }\n  }]);\n  return ListItemEditForm;\n}(_react.Component);\n\n(0, _defineProperty2[\"default\"])(ListItemEditForm, \"propTypes\", {\n  handleEditFormCancel: _propTypes[\"default\"].func,\n  item: _propTypes[\"default\"].object.isRequired\n});\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    smData: state.smData\n  };\n};\n\nvar mapDispathToProps = function mapDispathToProps(dispatch) {\n  return {\n    buildSMUI: function buildSMUI(json) {\n      return dispatch((0, _smData.buildSMUI)(json));\n    }\n  };\n};\n\nvar _default = (0, _reactRedux.connect)(mapStateToProps, mapDispathToProps)(ListItemEditForm);\n\nexports[\"default\"] = _default;","map":null,"metadata":{},"sourceType":"module"}