{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.PureStructureOutputContainer = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactRedux = require(\"react-redux\");\n\nvar _List = _interopRequireDefault(require(\"../components/List\"));\n\nvar _reactBootstrap = require(\"react-bootstrap\");\n\nvar _Utils = _interopRequireDefault(require(\"../api/Utils\"));\n\nvar _AlertContainer = _interopRequireDefault(require(\"./AlertContainer\"));\n\nvar _alertStatus = require(\"../services/alert-status\");\n\nvar StructureOutputContainer =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inherits2[\"default\"])(StructureOutputContainer, _Component);\n\n  function StructureOutputContainer(props) {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, StructureOutputContainer);\n    _this = (0, _possibleConstructorReturn2[\"default\"])(this, (0, _getPrototypeOf2[\"default\"])(StructureOutputContainer).call(this, props));\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"state\", {\n      alertObj: _this.props.alertObj,\n      baseURL: _this.props.baseURL,\n      masterFileID: _this.props.masterFileID,\n      structureStatus: _this.props.forms.structureStatus\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"clearAlert\", function () {\n      _this.setState({\n        alertObj: null\n      });\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleSaveItClick\", function () {\n      var _this$state = _this.state,\n          baseURL = _this$state.baseURL,\n          masterFileID = _this$state.masterFileID;\n      var postData = {\n        json: _this.props.smData[0]\n      };\n\n      _this.apiUtils.postRequest(baseURL, masterFileID, 'structure.json', postData).then(function (response) {\n        var status = response.status;\n        var alertObj = (0, _alertStatus.configureAlert)(status, _this.clearAlert);\n\n        _this.setState({\n          alertObj: alertObj\n        });\n      })[\"catch\"](function (error) {\n        _this.handleSaveError(error);\n      });\n    });\n    _this.apiUtils = new _Utils[\"default\"]();\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(StructureOutputContainer, [{\n    key: \"handleSaveError\",\n    value: function handleSaveError(error) {\n      console.log('TCL: handleSaveError -> error', error);\n      var status = error.response !== undefined ? error.response.status : error.request.status;\n      var alertObj = (0, _alertStatus.configureAlert)(status, this.clearAlert);\n      this.setState({\n        alertObj: alertObj\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          forms = _this$props.forms,\n          smData = _this$props.smData;\n      var alertObj = this.state.alertObj;\n      return _react[\"default\"].createElement(\"section\", {\n        className: \"structure-section\"\n      }, !forms.structureRetrieved ? _react[\"default\"].createElement(_AlertContainer[\"default\"], alertObj) : _react[\"default\"].createElement(\"div\", null, _react[\"default\"].createElement(_AlertContainer[\"default\"], alertObj), _react[\"default\"].createElement(_List[\"default\"], {\n        items: smData\n      }), _react[\"default\"].createElement(_reactBootstrap.Row, null, _react[\"default\"].createElement(_reactBootstrap.Col, {\n        xs: 12,\n        className: \"text-right\"\n      }, _react[\"default\"].createElement(_reactBootstrap.Button, {\n        bsStyle: \"primary\",\n        onClick: this.handleSaveItClick\n      }, \"Save Structure\")))));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      if (prevState.structureStatus !== nextProps.forms.structureStatus) {\n        return {\n          alertObj: (0, _alertStatus.configureAlert)(nextProps.forms.structureStatus, nextProps.clearAlert)\n        };\n      }\n\n      if (nextProps.alertObj === null) {\n        return {\n          alertObj: null\n        };\n      }\n\n      return null;\n    }\n  }]);\n  return StructureOutputContainer;\n}(_react.Component); // For testing purposes\n\n\nexports.PureStructureOutputContainer = StructureOutputContainer;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    smData: state.smData,\n    forms: state.forms\n  };\n}; // const mapDispatchToProps = dispatch => ({\n//   buildSMUI: smData => dispatch(buildSMUI(smData)),\n//   retrieveStructureSuccess: () => dispatch(retrieveStructureSuccess())\n// });\n\n\nvar _default = (0, _reactRedux.connect)(mapStateToProps)(StructureOutputContainer);\n\nexports[\"default\"] = _default;","map":null,"metadata":{},"sourceType":"module"}