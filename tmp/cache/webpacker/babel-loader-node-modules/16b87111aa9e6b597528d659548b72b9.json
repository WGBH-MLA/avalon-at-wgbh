{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf3 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactRedux = require(\"react-redux\");\n\nvar _StructuralMetadataUtils = _interopRequireDefault(require(\"../services/StructuralMetadataUtils\"));\n\nvar _reactBootstrap = require(\"react-bootstrap\");\n\nvar actions = _interopRequireWildcard(require(\"../actions/forms\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _lodash = require(\"lodash\");\n\nvar _formHelper = require(\"../services/form-helper\");\n\nvar structuralMetadataUtils = new _StructuralMetadataUtils[\"default\"]();\n\nvar HeadingForm =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inherits2[\"default\"])(HeadingForm, _Component);\n\n  function HeadingForm() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, HeadingForm);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = (0, _possibleConstructorReturn2[\"default\"])(this, (_getPrototypeOf2 = (0, _getPrototypeOf3[\"default\"])(HeadingForm)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"state\", {\n      headingTitle: '',\n      headingChildOf: '',\n      childOfOptions: []\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleCancelClick\", function () {\n      _this.props.toggleHeading();\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleChildOfChange\", function (e) {\n      _this.setState({\n        headingChildOf: e.target.value\n      });\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleHeadingChange\", function (e) {\n      _this.setState({\n        headingTitle: e.target.value\n      });\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleSubmit\", function (e) {\n      var _this$state = _this.state,\n          headingChildOf = _this$state.headingChildOf,\n          headingTitle = _this$state.headingTitle;\n      var submitItem = {\n        headingChildOf: headingChildOf,\n        headingTitle: headingTitle\n      };\n      e.preventDefault();\n\n      _this.props.onSubmit(submitItem); // Clear form\n\n\n      _this.clearFormValues();\n    });\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(HeadingForm, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.smData.length > 0) {\n        this.processOptions();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (!(0, _lodash.isEqual)(this.props.smData, prevProps.smData)) {\n        this.processOptions();\n      }\n    }\n  }, {\n    key: \"clearFormValues\",\n    value: function clearFormValues() {\n      this.setState({\n        headingTitle: '',\n        headingChildOf: '',\n        childOfOptions: []\n      });\n    }\n  }, {\n    key: \"formIsValid\",\n    value: function formIsValid() {\n      var headingTitle = this.state.headingTitle;\n      var titleValid = headingTitle && headingTitle.length > 2;\n      var childOfValid = this.state.headingChildOf.length > 0;\n      return titleValid && childOfValid;\n    }\n  }, {\n    key: \"getOptions\",\n    value: function getOptions() {\n      var rootHeader = structuralMetadataUtils.getItemsOfType('root', this.props.smData);\n      var divHeaders = structuralMetadataUtils.getItemsOfType('div', this.props.smData);\n      var allHeaders = rootHeader.concat(divHeaders);\n      var options = allHeaders.map(function (header) {\n        return _react[\"default\"].createElement(\"option\", {\n          value: header.id,\n          key: header.id\n        }, header.label);\n      });\n      return options;\n    }\n  }, {\n    key: \"processOptions\",\n    value: function processOptions() {\n      var options = this.getOptions();\n      this.setState({\n        childOfOptions: options\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var headingTitle = this.state.headingTitle;\n      return _react[\"default\"].createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        \"data-testid\": \"heading-form\"\n      }, _react[\"default\"].createElement(_reactBootstrap.FormGroup, {\n        controlId: \"headingTitle\",\n        validationState: (0, _formHelper.getValidationTitleState)(headingTitle),\n        \"data-testid\": \"heading-title-form-group\"\n      }, _react[\"default\"].createElement(_reactBootstrap.ControlLabel, null, \"Title\"), _react[\"default\"].createElement(_reactBootstrap.FormControl, {\n        type: \"text\",\n        value: headingTitle,\n        onChange: this.handleHeadingChange\n      }), _react[\"default\"].createElement(_reactBootstrap.FormControl.Feedback, null)), _react[\"default\"].createElement(_reactBootstrap.FormGroup, {\n        controlId: \"headingChildOf\"\n      }, _react[\"default\"].createElement(_reactBootstrap.ControlLabel, null, \"Child Of\"), _react[\"default\"].createElement(_reactBootstrap.FormControl, {\n        componentClass: \"select\",\n        placeholder: \"select\",\n        onChange: this.handleChildOfChange,\n        value: this.state.headingChildOf\n      }, _react[\"default\"].createElement(\"option\", {\n        value: \"\"\n      }, \"Select...\"), this.state.childOfOptions)), _react[\"default\"].createElement(_reactBootstrap.Row, null, _react[\"default\"].createElement(_reactBootstrap.Col, {\n        xs: 12\n      }, _react[\"default\"].createElement(_reactBootstrap.ButtonToolbar, {\n        className: \"pull-right\"\n      }, _react[\"default\"].createElement(_reactBootstrap.Button, {\n        onClick: this.props.cancelClick,\n        \"data-testid\": \"heading-form-cancel-button\"\n      }, \"Cancel\"), _react[\"default\"].createElement(_reactBootstrap.Button, {\n        bsStyle: \"primary\",\n        type: \"submit\",\n        disabled: !this.formIsValid(),\n        \"data-testid\": \"heading-form-save-button\"\n      }, \"Save\")))));\n    }\n  }]);\n  return HeadingForm;\n}(_react.Component);\n\nHeadingForm.propTypes = {\n  cancelClick: _propTypes[\"default\"].func,\n  onSubmit: _propTypes[\"default\"].func\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    smData: state.smData\n  };\n};\n\nvar _default = (0, _reactRedux.connect)(mapStateToProps, actions)(HeadingForm);\n\nexports[\"default\"] = _default;","map":null,"metadata":{},"sourceType":"module"}